#include <bits/stdc++.h>



bool Fg,Sg;
int F,S;
char T[3][4];

int main(){
    for(int i=0;i<3;i++)
        scanf("%s",T[i]);
    for(int i=0;i<3;i++)
        for(int j=0;j<3;j++)
            if(T[i][j]=='X')F++;
            else if(T[i][j]=='0')S++;
    if(abs(F-S)>1 || S>F){
        Fg=Sg=true;
    }

    if((T[0][0]==T[0][1] && T[0][1] == T[0][2] && T[0][0]=='X') ||
       (T[1][0]==T[1][1] && T[1][1] == T[1][2] && T[1][0]=='X') ||
       (T[2][0]==T[2][1] && T[2][1] == T[2][2] && T[2][0]=='X') ||

       (T[0][0]==T[1][0] && T[1][0] == T[2][0] && T[0][0]=='X') ||  
       (T[0][1]==T[1][1] && T[1][1] == T[2][1] && T[0][1]=='X') ||  
       (T[0][2]==T[1][2] && T[1][2] == T[2][2] && T[0][2]=='X') ||   

       (T[0][0]==T[1][1] && T[1][1] == T[2][2] && T[0][0]=='X') ||  
       (T[2][0]==T[1][1] && T[1][1] == T[0][2] && T[2][0]=='X')) {
        
        Fg=true;
    }

    if((T[0][0]==T[0][1] && T[0][1] == T[0][2] && T[0][0]=='0') ||
       (T[1][0]==T[1][1] && T[1][1] == T[1][2] && T[1][0]=='0') ||
       (T[2][0]==T[2][1] && T[2][1] == T[2][2] && T[2][0]=='0') ||

       (T[0][0]==T[1][0] && T[1][0] == T[2][0] && T[0][0]=='0') ||  
       (T[0][1]==T[1][1] && T[1][1] == T[2][1] && T[0][1]=='0') ||  
       (T[0][2]==T[1][2] && T[1][2] == T[2][2] && T[0][2]=='0') ||   

       (T[0][0]==T[1][1] && T[1][1] == T[2][2] && T[0][0]=='0') ||  
       (T[2][0]==T[1][1] && T[1][1] == T[0][2] && T[2][0]=='0')) {
        
        Sg=true;
    }

    if(Fg && Sg){
        printf("illegal\n");
        return 0;
    }
    else if(Fg && F-1==S){
        printf("the first player won\n");
        return 0;
    }
    else if(Sg && F==S){
        printf("the second player won\n");      
        return 0;
    }
    if(!Fg && !Sg && S+F==9)
        printf("draw");
    else {
        if(F==S && !Fg && S+F<9)
            printf("first\n");
        else if(S+1==F &&!Sg && S+F<9)
            printf("second\n");
        else {
            printf("illegal");
        }        
    }
    
       

    return 0;
}